# é¸è‚¡è©•åˆ†ç³»çµ± - å°ˆæ¡ˆé–‹ç™¼æŒ‡å—

## å°ˆæ¡ˆæ¦‚è¿°

æœ¬å°ˆæ¡ˆæ—¨åœ¨å»ºç«‹ä¸€å€‹**æ¯æ—¥é¸è‚¡è©•åˆ†ç³»çµ±**ï¼Œæ•´åˆæŠ€è¡“é¢èˆ‡åŸºæœ¬é¢æŒ‡æ¨™ï¼Œè®“ä½¿ç”¨è€…è¼¸å…¥è‚¡ç¥¨è§€å¯Ÿæ¸…å–®å¾Œï¼Œç³»çµ±è‡ªå‹•è¨ˆç®—è©•åˆ†ä¸¦å‘ˆç¾çµæœã€‚ç³»çµ±éœ€èˆ‡ç¾æœ‰çš„ã€Œå³æ™‚æˆ°æƒ…å®¤ã€æ•´åˆï¼Œä½œç‚ºå´é‚Šå°èˆªçš„å­åŠŸèƒ½ã€‚

---

## åŸ·è¡Œç’°å¢ƒ

```bash
# å•Ÿå‹•é–‹ç™¼ç’°å¢ƒ
conda activate my_project

# åŸ·è¡Œæ‡‰ç”¨ç¨‹å¼
python app.py
```

**é è¨­é€£æ¥åŸ **: `http://127.0.0.1:8050/`

---

## æŠ€è¡“æ¶æ§‹

### æ¡†æ¶èˆ‡å¥—ä»¶
| å¥—ä»¶ | ç”¨é€” |
|------|------|
| Dash | Web æ‡‰ç”¨æ¡†æ¶ |
| Plotly | äº’å‹•å¼åœ–è¡¨ |
| Pandas | è³‡æ–™è™•ç† |
| Finlab | è‚¡ç¥¨è³‡æ–™ä¾†æº |
| Redis | å³æ™‚è³‡æ–™ä¸²æµ (ç›®å‰å¯è·³é) |

### è³‡æ–™ä¾†æº
- **Finlab API**: å–å¾—æ”¶ç›¤åƒ¹ã€æˆäº¤é‡ã€ç‡Ÿæ”¶ã€EPS ç­‰åŸºæœ¬é¢è³‡æ–™
- **Redis Pub/Sub**: å³æ™‚ tick è³‡æ–™ (ç›®å‰å°šæœªå•Ÿç”¨ï¼Œç›¸é—œåŠŸèƒ½å…ˆè·³é)
- **æœ¬åœ° Log æª”**: `D:/pub_sub_data/*.log` æ­·å²è³‡æ–™

---

## UI æ¶æ§‹è¨­è¨ˆ

åƒè€ƒ `sample.png` çš„ UI é…ç½®ï¼š

```
+-------------------+----------------------------------------------------------+
|  [ å´é‚Šå°èˆªæ¬„ ]   |  [ ä¸»å…§å®¹å€å¡Š ]                                          |
|                   |                                                          |
|  å°è‚¡æˆ°æƒ…å®¤       |   ğŸ“‹ æ¯æ—¥é¸è‚¡è©•åˆ†                                        |
|  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    |   è¼¸å…¥è§€å¯Ÿæ¸…å–®ï¼Œç³»çµ±ä¾æ“šæŠ€è¡“é¢èˆ‡åŸºæœ¬é¢é€²è¡Œè©•åˆ†            |
|                   |                                                          |
|  ğŸ”´ å³æ™‚æˆ°æƒ…å®¤    |   +----------------------------------------------------+ |
|                   |   | 2330, 2454, 3008, 2603 (è¼¸å…¥è‚¡ç¥¨ä»£ç¢¼...)           | |
|  ğŸ‘‰ é¸è‚¡è©•åˆ†ç³»çµ±  |   +----------------------------------------------------+ |
|                   |                                                          |
|                   |   [ ğŸš€ é–‹å§‹è¨ˆç®—è©•åˆ† ]    âœ… è¨ˆç®—å®Œæˆ! å…± N æª”            |
|                   |                                                          |
|                   |   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   |
|                   |   â”‚ ä»£ç¢¼ â”‚ åç¨± â”‚ ç¸½åˆ† â”‚ åƒè€ƒåƒ¹ â”‚ æˆäº¤é‡‘é¡ â”‚ ç‡Ÿæ”¶YoY â”‚   |
|                   |   â”‚ EPS  â”‚ è©•åˆ†èªªæ˜                                  â”‚   |
|                   |   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   |
|                   |   â”‚ 2454 â”‚ è¯ç™¼ç§‘â”‚ 60  â”‚ 980.0 â”‚ 25.4å„„ â”‚ 25.4%    â”‚   |
|                   |   â”‚ 15.2 â”‚ å‡ç·šå¤šæ’(+20), MACDå¤šé ­(+20), ç‡Ÿæ”¶å¼·å‹   â”‚   |
|                   |   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   |
|                   |                                                          |
|                   |   ğŸ“ˆ å€‹è‚¡å³æ™‚èµ°å‹¢ (é»æ“Šè¡¨æ ¼åˆ—é¡¯ç¤º)                       |
|                   |   [èµ°å‹¢åœ–å€å¡Š]                                           |
+-------------------+----------------------------------------------------------+
```

### è¡¨æ ¼æ¬„ä½å®šç¾©

| æ¬„ä½ | èªªæ˜ | è³‡æ–™ä¾†æº |
|------|------|----------|
| ä»£ç¢¼ | è‚¡ç¥¨ä»£ç¢¼ | ä½¿ç”¨è€…è¼¸å…¥ |
| åç¨± | è‚¡ç¥¨åç¨± | Finlab TWMarket |
| ç¸½åˆ† | ç¶œåˆè©•åˆ† (0-100) | è¨ˆç®—è€Œå¾— |
| åƒè€ƒåƒ¹ | æ˜¨æ—¥æ”¶ç›¤åƒ¹ | Finlab price:æ”¶ç›¤åƒ¹ |
| æˆäº¤é‡‘é¡(å„„) | ç•¶æ—¥æˆäº¤é‡‘é¡ | Finlab price:æˆäº¤é‡‘é¡ |
| æœˆç‡Ÿæ”¶YoY% | æœˆç‡Ÿæ”¶å¹´å¢ç‡ | Finlab ç‡Ÿæ”¶è³‡æ–™ |
| EPS(å­£) | æœ€è¿‘ä¸€å­£ EPS | Finlab EPS è³‡æ–™ |
| è©•åˆ†èªªæ˜ | å„æŒ‡æ¨™å¾—åˆ†æ˜ç´° | è¨ˆç®—è€Œå¾— |

---

## è©•åˆ†ç³»çµ±è¨­è¨ˆ

### è©•åˆ†é …ç›® (ç¸½åˆ† 70 åˆ†)

#### 1. æŠ€è¡“é¢å‹•èƒ½ (40åˆ†)

| æŒ‡æ¨™ | é…åˆ† | åˆ¤æ–·æ¢ä»¶ |
|------|------|----------|
| å‡ç·šå¤šé ­æ’åˆ— | +20 | MA10 > MA20 > MA60 |
| MACD å¼·å‹¢ | +20 | MACD åœ¨ 0 è»¸ä»¥ä¸Šï¼Œä¸”å‘ä¸Šå½ (MACD > å‰ä¸€æ—¥ MACD) |

#### 2. åŸºæœ¬é¢è¼”åŠ© (30åˆ†)

| æŒ‡æ¨™ | é…åˆ† | åˆ¤æ–·æ¢ä»¶ | è³‡æ–™ä¾†æº |
|------|------|----------|----------|
| ç‡Ÿæ”¶æˆé•· | +10 | æœˆç‡Ÿæ”¶ YoY > 20% | `data.get('monthly_revenue:å»å¹´åŒæœˆå¢æ¸›(%)')` |
| ç”¢æ¥­è¶¨å‹¢ | +10 | æ‰€å±¬æ—ç¾¤ç‚ºéå»10å¤©æ¼²å¹…å‰äº”å¤§ | `ç”¢æ¥­åˆ†é¡è³‡æ–™åº«.csv` |
| æˆäº¤å€¼æ´»çµ¡ | +10 | éå»10å¤©å…§æœ‰ä»»ä¸€å¤©æˆäº¤å€¼é€²å…¥å‰30å¤§ | `data.get('price:æˆäº¤é‡‘é¡')` |

### ç”¢æ¥­è¶¨å‹¢è¨ˆç®—æ–¹å¼

1. æ—ç¾¤è³‡æ–™ä¾†æº: `C:\Users\user\Documents\_12_BO_strategy\ç”¢æ¥­åˆ†é¡è³‡æ–™åº«.csv`
2. è¨ˆç®—æ–¹å¼: æ—ç¾¤å…§æ‰€æœ‰æ¨™çš„çš„ç°¡å–®å¹³å‡è‚¡åƒ¹
3. æ¼²è·Œå¹…: (ä»Šæ—¥æ—ç¾¤å¹³å‡è‚¡åƒ¹ - 10æ—¥å‰æ—ç¾¤å¹³å‡è‚¡åƒ¹) / 10æ—¥å‰æ—ç¾¤å¹³å‡è‚¡åƒ¹ * 100
4. å–æ¼²å¹…å‰äº”å¤§æ—ç¾¤ï¼Œè©²æ—ç¾¤å…§çš„æ¨™çš„çµ¦äºˆ +10 åˆ†

---

## ç¨‹å¼ç¢¼çµæ§‹

```
_13_rankingSystem/
â”œâ”€â”€ claude.md              # æœ¬æ–‡ä»¶ - AI é–‹ç™¼æŒ‡å—
â”œâ”€â”€ app.py                 # ä¸»ç¨‹å¼å…¥å£ (å¾…å»ºç«‹)
â”œâ”€â”€ real_time_panel.py     # åƒè€ƒç¨‹å¼ç¢¼ - å³æ™‚æˆ°æƒ…å®¤
â”œâ”€â”€ sample.png             # UI è¨­è¨ˆåƒè€ƒåœ–
â”œâ”€â”€ stock_category.csv     # è‚¡ç¥¨é¡åˆ¥è³‡æ–™
â”‚
â”œâ”€â”€ modules/               # åŠŸèƒ½æ¨¡çµ„ (å¾…å»ºç«‹)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ data_fetcher.py    # è³‡æ–™å–å¾—æ¨¡çµ„
â”‚   â”œâ”€â”€ scoring.py         # è©•åˆ†é‚è¼¯æ¨¡çµ„
â”‚   â””â”€â”€ charts.py          # åœ–è¡¨ç¹ªè£½æ¨¡çµ„
â”‚
â”œâ”€â”€ layouts/               # UI ä½ˆå±€ (å¾…å»ºç«‹)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ sidebar.py         # å´é‚Šå°èˆªæ¬„
â”‚   â”œâ”€â”€ selection_page.py  # é¸è‚¡è©•åˆ†é é¢
â”‚   â””â”€â”€ realtime_page.py   # å³æ™‚æˆ°æƒ…å®¤é é¢
â”‚
â””â”€â”€ docs/                  # æ–‡ä»¶è³‡æ–™å¤¾
    â”œâ”€â”€ UI.md              # UI è¨­è¨ˆèªªæ˜
    â”œâ”€â”€ å°ˆæ¡ˆèªªæ˜.md         # å°ˆæ¡ˆèªªæ˜
    â””â”€â”€ tak1.md            # ä»»å‹™èªªæ˜
```

---

## é–‹ç™¼æ³¨æ„äº‹é …

### å¿…é ˆéµå¾ªçš„è¦ç¯„

1. **ç¨‹å¼ç¢¼é¢¨æ ¼**: åƒè€ƒ `real_time_panel.py` çš„å¯«æ³•
2. **Dash å…ƒä»¶**: ä½¿ç”¨ `dash.dcc` å’Œ `dash.html` å…ƒä»¶
3. **åœ–è¡¨åº«**: ä½¿ç”¨ `plotly.graph_objects` å’Œ `plotly.express`
4. **è³‡æ–™è™•ç†**: ä½¿ç”¨ Pandas DataFrame

### Redis ç›¸é—œåŠŸèƒ½æš«æ™‚è·³é

ç”±æ–¼ç›®å‰æ²’æœ‰ Redis è³‡æ–™ï¼Œä»¥ä¸‹åŠŸèƒ½å…ˆä½¿ç”¨éœæ…‹è³‡æ–™æˆ–æ¨¡æ“¬è³‡æ–™ï¼š
- å³æ™‚ tick è³‡æ–™ä¸²æµ
- å³æ™‚èµ°å‹¢åœ–æ›´æ–°
- Pub/Sub è¨‚é–±åŠŸèƒ½

å¯å…ˆä½¿ç”¨ Finlab çš„æ­·å²è³‡æ–™é€²è¡Œé–‹ç™¼æ¸¬è©¦ã€‚

### Finlab ç™»å…¥

```python
from finlab import data, login
login('Y8qx8Zs1zTnNk7McQPGpR4Lb9jv29EMQpiOMAxyBpmcIK4mYc2vODIvD8PuXLctw')
```

---

## å¾…å¯¦ä½œåŠŸèƒ½æ¸…å–®

### Phase 1 - æ ¸å¿ƒåŠŸèƒ½
- [ ] å»ºç«‹ Dash æ‡‰ç”¨åŸºç¤æ¶æ§‹
- [ ] å¯¦ä½œå´é‚Šå°èˆªæ¬„åˆ‡æ›
- [ ] å¯¦ä½œè‚¡ç¥¨è¼¸å…¥èˆ‡è§£æ
- [ ] å¯¦ä½œè©•åˆ†è¨ˆç®—é‚è¼¯
- [ ] å¯¦ä½œçµæœè¡¨æ ¼é¡¯ç¤º

### Phase 2 - é€²éšåŠŸèƒ½
- [ ] è¡¨æ ¼æ’åºèˆ‡ç¯©é¸
- [ ] é»æ“Šè¡¨æ ¼é¡¯ç¤ºå€‹è‚¡èµ°å‹¢åœ–
- [ ] è©•åˆ†èªªæ˜è©³æƒ…å½ˆçª—

### Phase 3 - æ•´åˆåŠŸèƒ½ (éœ€ Redis)
- [ ] å³æ™‚è³‡æ–™ä¸²æµæ•´åˆ
- [ ] æ—ç¾¤æˆäº¤é‡‘é¡å æ¯”
- [ ] æ—ç¾¤æ¼²è·Œå¹…åˆ†å¸ƒ

---

## åƒè€ƒç¨‹å¼ç¢¼ç‰‡æ®µ

### Finlab è³‡æ–™å–å¾—ç¯„ä¾‹

```python
from finlab import data
from datetime import datetime, timedelta

data.set_universe('TSE_OTC')
data.truncate_start = (datetime.now()-timedelta(days=60)).strftime('%Y-%m-%d')

# å–å¾—åƒ¹æ ¼è³‡æ–™
close = data.get('price:æ”¶ç›¤åƒ¹')
volume = data.get('price:æˆäº¤è‚¡æ•¸') / 1000
stock_trades = data.get('price:æˆäº¤é‡‘é¡')

# å–å¾—åŸºæœ¬é¢è³‡æ–™
revenue = data.get('monthly_revenue:ç•¶æœˆç‡Ÿæ”¶')
eps = data.get('fundamental_features:æ¯è‚¡ç›ˆé¤˜')
```

### Dash Layout ç¯„ä¾‹

```python
from dash import Dash, dcc, html

app = Dash(__name__)

app.layout = html.Div([
    # å´é‚Šå°èˆª
    html.Div([
        html.H3("å°è‚¡æˆ°æƒ…å®¤"),
        html.Button("å³æ™‚æˆ°æƒ…å®¤", id="btn-realtime"),
        html.Button("é¸è‚¡è©•åˆ†ç³»çµ±", id="btn-selection"),
    ], style={'width': '200px'}),

    # ä¸»å…§å®¹
    html.Div(id='main-content', children=[
        # å‹•æ…‹å…§å®¹
    ])
])
```

---

## å¿«é€Ÿé–‹å§‹

1. å•Ÿå‹•ç’°å¢ƒ: `conda activate my_project`
2. åŸ·è¡Œç¨‹å¼: `python app.py`
3. é–‹å•Ÿç€è¦½å™¨: `http://127.0.0.1:8050/`

---

*æ–‡ä»¶æœ€å¾Œæ›´æ–°: 2026-01-04*
